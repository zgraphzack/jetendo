<cfcomponent extends="zcorerootmapping.mvc.z.listing.mls-provider.rets-generic">
<cfoutput>
<cfscript>
this.retsVersion="1.7";

this.mls_id=24;
if(request.zos.istestserver){
	hqPhotoPath="#request.zos.sharedPath#mls-images/24/";
}else{
	hqPhotoPath="#request.zos.sharedPath#mls-images/24/";
}
this.useRetsFieldName="system";
this.arrTypeLoop=["A","B","C","E", "F", "G",  "H", "I"];
this.arrColumns=listtoarray("boardcode	colisting_member_address	colisting_member_email	colisting_member_fax	colisting_member_name	colisting_member_phone	colisting_member_shortid	colisting_member_url	coselling_member_address	coselling_member_email	coselling_member_fax	coselling_member_name	coselling_member_phone	coselling_member_shortid	coselling_member_url	feat20131230204054034348000000	feat20131230204111120419000000	feat20131230204123016978000000	feat20131230204143904133000000	feat20131230204159530873000000	feat20131230204208206156000000	feat20131230204224258242000000	feat20131230204233753772000000	feat20131230204258458263000000	feat20131230204311075450000000	feat20131230204323416770000000	feat20131230204340342485000000	feat20140102155720464036000000	feat20140102164020220631000000	feat20140102164032834080000000	feat20140102164048034860000000	feat20140102164058587753000000	feat20140102164117075052000000	feat20140102164150047321000000	feat20140102164203568815000000	feat20140102164218548030000000	feat20140102164504825070000000	feat20140102164522314480000000	feat20140102164536506897000000	feat20140102164552244476000000	feat20140102190106824896000000	feat20140102190126568268000000	feat20140102190253593498000000	feat20140102190311333936000000	feat20140102190320732626000000	feat20140102190919758682000000	feat20140102190943432882000000	feat20140102191023572138000000	feat20140102191056085749000000	feat20140102191111178701000000	feat20140102191123413485000000	feat20140102191153538402000000	feat20140102191205271844000000	feat20140102191216577511000000	feat20140102191227448355000000	feat20140102191242404395000000	feat20140102191253450079000000	feat20140102191302309427000000	feat20140102191858061993000000	feat20140102191944051295000000	feat20140102191958758142000000	feat20140102192018996963000000	feat20140102192025541762000000	feat20140102192114621375000000	feat20140102192125051760000000	feat20140102192136230639000000	feat20140102192151461903000000	feat20140102192203097231000000	feat20140102192454154293000000	feat20140102192507525216000000	feat20140102192515394601000000	feat20140102192527630872000000	feat20140102192532766854000000	feat20140102192605584029000000	feat20140102192615102725000000	feat20140102192624065745000000	feat20140102192655010161000000	feat20140102192705258793000000	feat20140102192714618370000000	feat20140102192723245434000000	feat20140102192731017860000000	feat20140102192741990004000000	feat20140102192750611222000000	feat20140102192801546073000000	feat20140102192843229860000000	feat20140102192858302566000000	feat20140102192906959230000000	feat20140102192916857289000000	feat20140102192924669374000000	feat20140102192936753541000000	feat20140102192947749605000000	feat20140102192956043234000000	feat20140102193042309817000000	feat20140102193052770238000000	feat20140103163610458157000000	feat20140106165605385858000000	feat20140106170040494113000000	feat20140106171128043098000000	feat20140106172831977347000000	feat20140106174845927054000000	feat20140106175331481367000000	feat20140106175331496799000000	feat20140106175331509147000000	feat20140106175331663070000000	feat20140106175333115768000000	feat20140107144343673308000000	feat20140107144400150524000000	feat20140107144413344145000000	feat20140107144437324990000000	feat20140107144532311863000000	feat20140107153036681363000000	feat20140107153053600787000000	feat20140107153104804275000000	feat20140107153122467033000000	feat20140107153150772337000000	feat20140107153458554034000000	feat20140107153510567923000000	feat20140107153524548085000000	feat20140107153544915606000000	feat20140107173835413994000000	feat20140107173914984761000000	feat20140107173929701474000000	feat20140107173945598876000000	feat20140107174003592111000000	feat20140107174036227629000000	feat20140107174529364906000000	feat20140107174610622033000000	feat20140107174646104042000000	feat20140107175537755938000000	feat20140107175550263777000000	feat20140107175605465048000000	feat20140107175618732807000000	feat20140107175652094544000000	feat20140107175704531048000000	feat20140107175717879636000000	feat20140107175729286608000000	feat20140107175753398533000000	feat20140107180103245848000000	feat20140107181906785312000000	feat20140107181916510620000000	feat20140107181935514056000000	feat20140107181948845103000000	feat20140107182003665206000000	feat20140107182022100637000000	feat20140107182433731716000000	feat20140107182445210842000000	feat20140107182508683105000000	feat20140107182523427508000000	feat20140107182553925094000000	feat20140107182724232583000000	feat20140107182735685026000000	feat20140107182749546167000000	feat20140107182804963365000000	feat20140107182819520334000000	feat20140107182834121350000000	feat20140107184715805205000000	feat20140107184715937942000000	feat20140107184716296013000000	feat20140107184716446833000000	feat20140122194332649294000000	feat20140122194337633493000000	feat20140122194344521908000000	feat20140122194353663123000000	feat20140122194359434746000000	feat20140122194405454346000000	feat20140122194411954821000000	feat20140122194418412222000000	feat20140122194424527590000000	feat20140122194432844715000000	feat20140122194458828468000000	feat20140122194506207064000000	feat20140122194509797548000000	feat20140122194515779184000000	feat20140122194521570559000000	feat20140122194527361700000000	feat20140122194533174011000000	feat20140122194539289010000000	feat20140122194545227666000000	feat20140122194550462628000000	feat20140122231602794931000000	feat20140122231612046312000000	feat20140122231626369763000000	feat20140122231640200152000000	feat20140122232100204529000000	gf20131203184139008236000000	gf20131203184218636299000000	gf20131203185458688530000000	gf20131203185526796706000000	gf20131203185600743925000000	gf20131203185627775813000000	gf20131203185651514669000000	gf20131203185720810239000000	gf20131203203446527084000000	gf20131203203501805928000000	gf20131203203513863218000000	gf20131203203523234694000000	gf20131203222306734642000000	gf20131203222329624962000000	gf20131203222538613490000000	gf20131203222557967287000000	gf20131203222632429564000000	gf20131203230336948736000000	gf20131203230400303531000000	gf20131204002446559965000000	gf20131230164912246391000000	gf20131230164912692795000000	gf20131230164913256545000000	gf20131230164913550188000000	gf20131230164913950023000000	gf20131230164914069211000000	gf20131230164914496790000000	gf20131230164914716475000000	gf20131230164914843719000000	gf20131230164915163503000000	gf20131230164915393862000000	gf20131230164915504744000000	gf20131230164915596595000000	gf20131230164915758526000000	gf20131230164915856587000000	gf20131230164915907956000000	gf20131230164915995141000000	gf20131230164916093183000000	gf20131230164916157466000000	gf20131230211343236208000000	gf20131230211343419650000000	gf20131230211343605075000000	gf20131230211343799585000000	gf20131230211343842573000000	gf20131230211344214865000000	gf20131230211344594219000000	gf20131230211344662701000000	gf20131230211344773282000000	gf20131230211344951543000000	gf20131230211345099571000000	gf20131230211345294491000000	gf20131230211345387488000000	gf20131230211345452659000000	gf20131231131422920677000000	gf20131231131424691326000000	gf20131231131425542804000000	gf20131231131425768713000000	gf20131231131426223746000000	gf20131231131426408675000000	gf20131231131426784319000000	gf20131231131426949311000000	gf20131231131427047479000000	gf20131231131427101593000000	gf20131231131427184540000000	gf20131231131427271202000000	gf20131231131427333528000000	gf20131231201806058732000000	gf20140102141846067740000000	gf20140102141910559513000000	gf20140102141921492524000000	gf20140102143317449028000000	gf20140103161837200256000000	gf20140103161854671615000000	gf20140106165354039268000000	gf20140106165451906375000000	gf20140106175333111396000000	gf20140113205903877367000000	gf20140113211432897834000000	gf20140122194042742595000000	gf20140122222400891202000000	gf20140122230958687511000000	gf20140123000239810061000000	gf20140301040458839511000000	gf20140301040517604689000000	gf20140301040543504795000000	gf20140301040553499723000000	gf20140301040603658419000000	gf20140301040614242393000000	gf20140303202922525103000000	gf20140303202934971134000000	gf20140303202946237645000000	gf20140303202955114565000000	gf20140303203004724905000000	gf20140303203013745168000000	gf20140303203108392237000000	gf20140303203125789190000000	gf20140303203135614718000000	gf20140303203145112062000000	gf20140303203156867992000000	gf20140303203206372635000000	list_0	list_1	list_10	list_101	list_102	list_103	list_104	list_105	list_106	list_107	list_108	list_109	list_11	list_110	list_111	list_112	list_113	list_114	list_115	list_116	list_117	list_118	list_119	list_12	list_120	list_121	list_122	list_123	list_124	list_125	list_126	list_127	list_128	list_129	list_13	list_130	list_131	list_132	list_133	list_134	list_135	list_137	list_140	list_141	list_142	list_143	list_144	list_145	list_146	list_147	list_148	list_149	list_15	list_150	list_151	list_152	list_153	list_154	list_155	list_156	list_157	list_158	list_159	list_16	list_160	list_161	list_162	list_163	list_17	list_18	list_19	list_2	list_21	list_22	list_23	list_26	list_27	list_29	list_3	list_31	list_33	list_34	list_35	list_37	list_39	list_4	list_40	list_41	list_43	list_45	list_46	list_47	list_48	list_49	list_5	list_50	list_51	list_52	list_53	list_54	list_56	list_57	list_58	list_59	list_6	list_60	list_61	list_62	list_63	list_64	list_66	list_68	list_69	list_7	list_70	list_72	list_74	list_75	list_76	list_77	list_78	list_79	list_8	list_80	list_81	list_82	list_83	list_84	list_85	list_86	list_87	list_88	list_89	list_9	list_90	list_91	list_92	list_93	list_94	list_95	list_96	list_97	listing_member_address	listing_member_email	listing_member_fax	listing_member_name	listing_member_phone	listing_member_shortid	listing_member_url	listing_office_address	listing_office_email	listing_office_fax	listing_office_name	listing_office_phone	listing_office_shortid	listing_office_url	room_b12_room_level	room_b12_room_rem	room_b2_room_area	room_b2_room_length	room_b2_room_level	room_b2_room_rem	room_b2_room_width	room_b3_room_area	room_b3_room_length	room_b3_room_level	room_b3_room_rem	room_b3_room_width	room_b4_room_area	room_b4_room_length	room_b4_room_level	room_b4_room_rem	room_b4_room_width	room_b5_room_area	room_b5_room_length	room_b5_room_level	room_b5_room_rem	room_b5_room_width	room_b6_room_area	room_b6_room_length	room_b6_room_level	room_b6_room_rem	room_b6_room_width	room_b7_room_area	room_b7_room_length	room_b7_room_level	room_b7_room_rem	room_b7_room_width	room_ba_room_level	room_ba_room_rem	room_bf_room_level	room_bf_room_rem	room_bk_room_level	room_bk_room_rem	room_bkr_room_area	room_bkr_room_length	room_bkr_room_level	room_bkr_room_rem	room_bkr_room_width	room_bl_room_level	room_bl_room_rem	room_bms_room_level	room_bms_room_rem	room_bnk_room_level	room_bnk_room_rem	room_bnr_room_area	room_bnr_room_length	room_bnr_room_level	room_bnr_room_rem	room_bnr_room_width	room_br_room_level	room_br_room_rem	room_bw_room_level	room_bw_room_rem	room_cp_room_level	room_cp_room_rem	room_cr_room_area	room_cr_room_length	room_cr_room_level	room_cr_room_rem	room_cr_room_width	room_cvp_room_level	room_cvp_room_rem	room_cy_room_level	room_cy_room_rem	room_da_room_level	room_da_room_rem	room_dk_room_level	room_dk_room_rem	room_dkc_room_level	room_dkc_room_rem	room_dlc_room_level	room_dlc_room_rem	room_dn_room_level	room_dn_room_rem	room_dr_room_area	room_dr_room_length	room_dr_room_level	room_dr_room_rem	room_dr_room_width	room_drr_room_area	room_drr_room_length	room_drr_room_level	room_drr_room_rem	room_drr_room_width	room_eik_room_level	room_eik_room_rem	room_en_room_area	room_en_room_length	room_en_room_level	room_en_room_rem	room_en_room_width	room_er_room_area	room_er_room_length	room_er_room_level	room_er_room_rem	room_er_room_width	room_fdr_room_level	room_fdr_room_rem	room_flr_room_level	room_flr_room_rem	room_fr_room_area	room_fr_room_length	room_fr_room_level	room_fr_room_rem	room_fr_room_width	room_fy_room_level	room_fy_room_rem	room_gh_room_area	room_gh_room_length	room_gh_room_level	room_gh_room_rem	room_gh_room_width	room_gr_room_area	room_gr_room_length	room_gr_room_level	room_gr_room_rem	room_gr_room_width	room_grm_room_level	room_grm_room_rem	room_hr_room_level	room_hr_room_rem	room_il_room_area	room_il_room_length	room_il_room_level	room_il_room_rem	room_il_room_width	room_kt_room_area	room_kt_room_length	room_kt_room_level	room_kt_room_rem	room_kt_room_width	room_lb_room_area	room_lb_room_length	room_lb_room_level	room_lb_room_rem	room_lb_room_width	room_lf_room_level	room_lf_room_rem	room_lg_room_level	room_lg_room_rem	room_lnr_room_area	room_lnr_room_length	room_lnr_room_level	room_lnr_room_rem	room_lnr_room_width	room_lr_room_area	room_lr_room_length	room_lr_room_level	room_lr_room_rem	room_lr_room_width	room_lrm_room_level	room_lrm_room_rem	room_mb_room_area	room_mb_room_length	room_mb_room_level	room_mb_room_rem	room_mb_room_width	room_mbt_room_area	room_mbt_room_length	room_mbt_room_level	room_mbt_room_rem	room_mbt_room_width	room_md_room_area	room_md_room_length	room_md_room_level	room_md_room_rem	room_md_room_width	room_mdr_room_level	room_mdr_room_rem	room_mr_room_area	room_mr_room_length	room_mr_room_level	room_mr_room_rem	room_mr_room_width	room_ms_room_area	room_ms_room_length	room_ms_room_level	room_ms_room_rem	room_ms_room_width	room_nr_room_level	room_nr_room_rem	room_oc_room_level	room_oc_room_rem	room_of_room_area	room_of_room_length	room_of_room_level	room_of_room_rem	room_of_room_width	room_ot_room_area	room_ot_room_length	room_ot_room_level	room_ot_room_rem	room_ot_room_width	room_pl_room_area	room_pl_room_length	room_pl_room_level	room_pl_room_rem	room_pl_room_width	room_pn_room_level	room_pn_room_rem	room_pr_room_area	room_pr_room_length	room_pr_room_level	room_pr_room_rem	room_pr_room_width	room_rr_room_area	room_rr_room_length	room_rr_room_level	room_rr_room_rem	room_rr_room_width	room_rs_room_level	room_rs_room_rem	room_sa_room_level	room_sa_room_rem	room_sd_room_level	room_sd_room_rem	room_sl_room_area	room_sl_room_length	room_sl_room_level	room_sl_room_rem	room_sl_room_width	room_sn_room_level	room_sn_room_rem	room_sp_room_level	room_sp_room_rem	room_sr_room_area	room_sr_room_length	room_sr_room_level	room_sr_room_rem	room_sr_room_width	room_st_room_area	room_st_room_length	room_st_room_level	room_st_room_rem	room_st_room_width	room_stu_room_area	room_stu_room_length	room_stu_room_level	room_stu_room_rem	room_stu_room_width	room_tr_room_level	room_tr_room_rem	room_ur_room_level	room_ur_room_rem	room_ut_room_area	room_ut_room_length	room_ut_room_level	room_ut_room_rem	room_ut_room_width	room_ws_room_level	room_ws_room_rem	selling_member_address	selling_member_email	selling_member_fax	selling_member_name	selling_member_phone	selling_member_shortid	selling_member_url	selling_office_address	selling_office_email	selling_office_fax	selling_office_name	selling_office_phone	selling_office_shortid	selling_office_url	unbrandedidxvirtualtour	vowaddr	vowavm	vowcomm	vowlist",chr(9));
this.arrFieldLookupFields=listtoarray("LGT220131126143817002353000000	LGT220131126143817002353000000	LGT120131126143817002353000000	LGT120131126143817002353000000	LGT320131126143817002353000000	LGT320131126143817002353000000	20131203183624205612000000	20131203183624916583000000	20131203183624380971000000	20131203183623948163000000	20131203183624997235000000	20131203183625016585000000	20131203183624370615000000	20131203183624907780000000	20131203183624410399000000	20131203183625926655000000	20131203183625022565000000	20131203183624547192000000	20131203183624622964000000	20131203183625124188000000	20131203183625369327000000	20131203183625571518000000	20131203183625671072000000	20131203183625790637000000	20131203183625861962000000	20131203183625868817000000	20131203183625878690000000	20131203183625886619000000	20131203183625139372000000	20131203183625146443000000	20131203183625201388000000	20131203183625209645000000	20131203183625217366000000	20131203183625662195000000	20131203183625679804000000	20131203183625758296000000	20131203183625768219000000	20131203183625776024000000	20131203183625781090000000	20131203183625801487000000	20131203183625808565000000	20131203183625813019000000	20131203183625820156000000	GFLU20131203203523234694000000	GFLU20131203185627775813000000	GFLU20140301040603658419000000	GFLU20140301040614242393000000	GFLU20140301040517604689000000	GFLU20140301040458839511000000	GFLU20131203203446527084000000	GFLU20131203185526796706000000	GFLU20131203184218636299000000	GFLU20131203203501805928000000	GFLU20140113205903877367000000	GFLU20131203185720810239000000	GFLU20131203185651514669000000	GFLU20131203203513863218000000	GFLU20140301040543504795000000	GFLU20140301040553499723000000	GFLU20131203230400303531000000	GFLU20131203230336948736000000	GFLU20131203185600743925000000	GFLU20131203222557967287000000	GFLU20131203222632429564000000	GFLU20140611153833516360000000	GFLU20131204002446559965000000	GFLU20131203184139008236000000	GFLU20131203185458688530000000	GFLU20131203222329624962000000	GFLU20131203222538613490000000	GFLU20131203222306734642000000	20131203183626217834000000	20131203183626024865000000	20131203183625939182000000	20131203183626236333000000	20131203183626252528000000	20131203183626020833000000	20131203183626214194000000	20131203183626038142000000	20131203183626563308000000	20131203183626256359000000	20131203183626067403000000	20131203183626106359000000	20131203183626502526000000	20131203183626539697000000	20131203183626544094000000	20131203183626548340000000	20131203183626551506000000	20131203183626313155000000	20131203183626317060000000	20131203183626321090000000	20131203183626325010000000	20131203183626329215000000	20131203183626462123000000	20131203183626470314000000	20131203183626476256000000	20131203183626481089000000	20131203183626486891000000	20131203183626492922000000	20131203183626497578000000	20131203183626507297000000	20131203183626512210000000	20131203183626516051000000	20131203183626520149000000	GFLU20131230164912692795000000	GFLU20131230164912246391000000	GFLU20140303203004724905000000	GFLU20140303203013745168000000	GFLU20140303202934971134000000	GFLU20140303202922525103000000	GFLU20131230164913256545000000	GFLU20131230164913550188000000	GFLU20131230164913950023000000	GFLU20131230164914069211000000	GFLU20131230164914496790000000	GFLU20131230164914716475000000	GFLU20131230164914843719000000	GFLU20140303202946237645000000	GFLU20140303202955114565000000	GFLU20131230164915163503000000	GFLU20131230164915393862000000	GFLU20131230164915504744000000	GFLU20131230164915596595000000	GFLU20131230164915856587000000	GFLU20131230164915758526000000	GFLU20131230164915907956000000	GFLU20131230164915995141000000	GFLU20131230164916093183000000	GFLU20131230164916157466000000	20131203183626631278000000	20131203183626928442000000	20131203183626653928000000	20131203183626572627000000	20131203183626946977000000	20131203183626960973000000	20131203183626649886000000	20131203183626925125000000	20131203183626665971000000	20131203183627250315000000	20131203183626694469000000	20131203183626822215000000	20131203183627013263000000	20131203183627056881000000	20131203183627102798000000	20131203183627191957000000	20131203183627229098000000	20131203183627232157000000	20131203183627236258000000	20131203183627021984000000	20131203183627026123000000	20131203183627030337000000	20131203183627033343000000	20131203183627037123000000	20131203183627142895000000	20131203183627150266000000	20131203183627172147000000	20131203183627180598000000	20131203183627184076000000	20131203183627188002000000	20131203183627195956000000	20131203183627201194000000	20131203183627205599000000	GFLU20131231131422920677000000	GFLU20131231201806058732000000	GFLU20131231131424691326000000	GFLU20140113211432897834000000	GFLU20131231131425542804000000	GFLU20131231131425768713000000	GFLU20131231131426223746000000	GFLU20131231131426408675000000	GFLU20131231131426784319000000	GFLU20131231131427047479000000	GFLU20131231131426949311000000	GFLU20131231131427101593000000	GFLU20131231131427184540000000	GFLU20131231131427271202000000	GFLU20131231131427333528000000	20131203183627900366000000	20131203183628117269000000	20131203183627927345000000	20131203183627843795000000	20131203183628134041000000	20131203183628146213000000	20131203183627921506000000	20131203183628113201000000	20131203183627941034000000	20131203183628447571000000	20131203183627908691000000	20131203183628045390000000	20131203183627969923000000	20131203183628004344000000	20131203183628389446000000	20131203183628422417000000	20131203183628425578000000	20131203183628212549000000	20131203183628337112000000	20131203183628346891000000	20131203183628359935000000	20131203183628368890000000	20131203183628393279000000	20131203183628397664000000	20131203183628402140000000	20131203183628406041000000	20140107144532311863000000	20140107153544915606000000	20140102193042309817000000	20140102193052770238000000	20140107174036227629000000	20140107174646104042000000	20140107182003665206000000	20140107182834121350000000	GFLU20140103161854671615000000	GFLU20140103161837200256000000	20131203183628516519000000	20131203183628729843000000	20131203183628541133000000	20131203183628456425000000	20131203183628746127000000	20131203183628758223000000	20131203183628536552000000	20131203183628726183000000	20131203183628553288000000	20131203183629058867000000	20131203183628658972000000	20131203183628580588000000	20131203183628620630000000	20131203183629000536000000	20131203183629032287000000	20131203183629036400000000	20131203183628819612000000	20131203183628972828000000	20131203183628981383000000	20131203183628988422000000	20131203183628992634000000	20131203183629004430000000	20131203183629008455000000	20140106175331509147000000	20140106175331663070000000	20140107184715805205000000	20140107184715937942000000	20140107184716296013000000	20140107184716446833000000	GFLU20140122194042742595000000	GFLU20140106175333111396000000	20131203183629135317000000	20131203183629336572000000	20131203183629162828000000	20131203183629068663000000	20131203183629352096000000	20131203183629363130000000	20131203183629158212000000	20131203183629331217000000	20131203183629175895000000	20131203183629688272000000	20131203183629369965000000	20131203183629230089000000	20131203183629415468000000	20131203183629469200000000	20131203183629523640000000	20131203183629576356000000	20131203183629663458000000	20131203183629572024000000	20131203183629581382000000	20131203183629588865000000	20131203183629599503000000	20131203183629607572000000	20131203183629642580000000	20140122231612046312000000	20131230204233753772000000	20131230204123016978000000	20131230204054034348000000	20140122231626369763000000	20131230204340342485000000	20131230204224258242000000	20131230204323416770000000	20140122232100204529000000	20140122231640200152000000	20131230204258458263000000	20131230204208206156000000	20131230204311075450000000	20131230204159530873000000	20131230204111120419000000	20140122231602794931000000	20131230204143904133000000	GFLU20131230211343236208000000	GFLU20140303203156867992000000	GFLU20140303203206372635000000	GFLU20140303203125789190000000	GFLU20140303203108392237000000	GFLU20131230211343419650000000	GFLU20131230211343605075000000	GFLU20131230211343842573000000	GFLU20131230211344214865000000	GFLU20140303203135614718000000	GFLU20131230211343799585000000	GFLU20140303203145112062000000	GFLU20131230211344594219000000	GFLU20131230211344662701000000	GFLU20131230211344773282000000	GFLU20140122230958687511000000	GFLU20131230211344951543000000	GFLU20140123000239810061000000	GFLU20131230211345099571000000	GFLU20131230211345294491000000	GFLU20131230211345387488000000	GFLU20131230211345452659000000	20131203183629990143000000	20131203183629804638000000	20131203183629696315000000	20131203183630008372000000	20131203183630023304000000	20131203183629801849000000	20131203183629986002000000	20131203183629816977000000	20131203183630317390000000	20131203183629846614000000	20131203183629882459000000	20131203183630076886000000	20131203183630123435000000	20131203183630169642000000	20131203183630295068000000	20131203183630096752000000	20131203183630101804000000	20131203183630211051000000	20131203183630219471000000	20131203183630226535000000	GFLU20140106165354039268000000	GFLU20140122222400891202000000	20131203183630388652000000	20131203183630616027000000	20131203183630414241000000	20131203183630325970000000	20131203183630634198000000	20131203183630647229000000	20131203183630410291000000	20131203183630611218000000	20131203183630426740000000	20131203183631043592000000	20131203183630456000000000	20131203183630490188000000	20131203183630983300000000	20131203183631020169000000	20131203183631024149000000	20131203183631027986000000	20131203183631032635000000	20131203183630702036000000	20131203183630705184000000	20131203183630710827000000	20131203183630715223000000	20131203183630719321000000	20131203183630926975000000	20131203183630936266000000	20131203183630946383000000	20131203183630958153000000	20131203183630968378000000	20131203183630977794000000	20131203183630987572000000	20131203183630993748000000	20131203183630998967000000	20131203183631002987000000	GFLU20140102141910559513000000	GFLU20140102141921492524000000	GFLU20140102141846067740000000	GFLU20140102143317449028000000	GFLU20140106165451906375000000	20131203183623948163000000	20131203183624205612000000	20131203183624370615000000	20131203183624380971000000	20131203183624410399000000	20131203183624547192000000	20131203183624622964000000	20131203183624907780000000	20131203183624916583000000	20131203183624997235000000	20131203183625016585000000	20131203183625022565000000	20131203183625124188000000	20131203183625139372000000	20131203183625146443000000	20131203183625201388000000	20131203183625209645000000	20131203183625217366000000	20131203183625369327000000	20131203183625571518000000	20131203183625662195000000	20131203183625671072000000	20131203183625679804000000	20131203183625758296000000	20131203183625768219000000	20131203183625776024000000	20131203183625781090000000	20131203183625790637000000	20131203183625801487000000	20131203183625808565000000	20131203183625813019000000	20131203183625820156000000	20131203183625861962000000	20131203183625868817000000	20131203183625878690000000	20131203183625886619000000	20131203183625926655000000	20131203183625939182000000	20131203183626020833000000	20131203183626024865000000	20131203183626038142000000	20131203183626067403000000	20131203183626106359000000	20131203183626214194000000	20131203183626217834000000	20131203183626236333000000	20131203183626252528000000	20131203183626256359000000	20131203183626313155000000	20131203183626317060000000	20131203183626321090000000	20131203183626325010000000	20131203183626329215000000	20131203183626462123000000	20131203183626470314000000	20131203183626476256000000	20131203183626481089000000	20131203183626486891000000	20131203183626492922000000	20131203183626497578000000	20131203183626502526000000	20131203183626507297000000	20131203183626512210000000	20131203183626516051000000	20131203183626520149000000	20131203183626539697000000	20131203183626544094000000	20131203183626548340000000	20131203183626551506000000	20131203183626563308000000	20131203183626572627000000	20131203183626631278000000	20131203183626649886000000	20131203183626653928000000	20131203183626665971000000	20131203183626694469000000	20131203183626822215000000	20131203183626925125000000	20131203183626928442000000	20131203183626946977000000	20131203183626960973000000	20131203183627013263000000	20131203183627021984000000	20131203183627026123000000	20131203183627030337000000	20131203183627033343000000	20131203183627037123000000	20131203183627056881000000	20131203183627102798000000	20131203183627142895000000	20131203183627150266000000	20131203183627172147000000	20131203183627180598000000	20131203183627184076000000	20131203183627188002000000	20131203183627191957000000	20131203183627195956000000	20131203183627201194000000	20131203183627205599000000	20131203183627229098000000	20131203183627232157000000	20131203183627236258000000	20131203183627250315000000	20131203183627843795000000	20131203183627900366000000	20131203183627908691000000	20131203183627921506000000	20131203183627927345000000	20131203183627941034000000	20131203183627969923000000	20131203183628004344000000	20131203183628045390000000	20131203183628113201000000	20131203183628117269000000	20131203183628134041000000	20131203183628146213000000	20131203183628212549000000	20131203183628337112000000	20131203183628346891000000	20131203183628359935000000	20131203183628368890000000	20131203183628389446000000	20131203183628393279000000	20131203183628397664000000	20131203183628402140000000	20131203183628406041000000	20131203183628422417000000	20131203183628425578000000	20131203183628447571000000	20131203183628456425000000	20131203183628516519000000	20131203183628536552000000	20131203183628541133000000	20131203183628553288000000	20131203183628580588000000	20131203183628620630000000	20131203183628658972000000	20131203183628726183000000	20131203183628729843000000	20131203183628746127000000	20131203183628758223000000	20131203183628819612000000	20131203183628972828000000	20131203183628981383000000	20131203183628988422000000	20131203183628992634000000	20131203183629000536000000	20131203183629004430000000	20131203183629008455000000	20131203183629032287000000	20131203183629036400000000	20131203183629058867000000	20131203183629068663000000	20131203183629135317000000	20131203183629158212000000	20131203183629162828000000	20131203183629175895000000	20131203183629230089000000	20131203183629331217000000	20131203183629336572000000	20131203183629352096000000	20131203183629363130000000	20131203183629369965000000	20131203183629415468000000	20131203183629469200000000	20131203183629523640000000	20131203183629572024000000	20131203183629576356000000	20131203183629581382000000	20131203183629588865000000	20131203183629599503000000	20131203183629607572000000	20131203183629642580000000	20131203183629663458000000	20131203183629688272000000	20131203183629696315000000	20131203183629801849000000	20131203183629804638000000	20131203183629816977000000	20131203183629846614000000	20131203183629882459000000	20131203183629986002000000	20131203183629990143000000	20131203183630008372000000	20131203183630023304000000	20131203183630076886000000	20131203183630096752000000	20131203183630101804000000	20131203183630123435000000	20131203183630169642000000	20131203183630211051000000	20131203183630219471000000	20131203183630226535000000	20131203183630295068000000	20131203183630317390000000	20131203183630325970000000	20131203183630388652000000	20131203183630410291000000	20131203183630414241000000	20131203183630426740000000	20131203183630456000000000	20131203183630490188000000	20131203183630611218000000	20131203183630616027000000	20131203183630634198000000	20131203183630647229000000	20131203183630702036000000	20131203183630705184000000	20131203183630710827000000	20131203183630715223000000	20131203183630719321000000	20131203183630926975000000	20131203183630936266000000	20131203183630946383000000	20131203183630958153000000	20131203183630968378000000	20131203183630977794000000	20131203183630983300000000	20131203183630987572000000	20131203183630993748000000	20131203183630998967000000	20131203183631002987000000	20131203183631020169000000	20131203183631024149000000	20131203183631027986000000	20131203183631032635000000	20131203183631043592000000	20131230204054034348000000	20131230204111120419000000	20131230204123016978000000	20131230204143904133000000	20131230204159530873000000	20131230204208206156000000	20131230204224258242000000	20131230204233753772000000	20131230204258458263000000	20131230204311075450000000	20131230204323416770000000	20131230204340342485000000	20140102193042309817000000	20140102193052770238000000	20140106175331509147000000	20140106175331663070000000	20140107144532311863000000	20140107153544915606000000	20140107174036227629000000	20140107174646104042000000	20140107182003665206000000	20140107182834121350000000	20140107184715805205000000	20140107184715937942000000	20140107184716296013000000	20140107184716446833000000	20140122231602794931000000	20140122231612046312000000	20140122231626369763000000	20140122231640200152000000	20140122232100204529000000	GFLU20131203184139008236000000	GFLU20131203184218636299000000	GFLU20131203185458688530000000	GFLU20131203185526796706000000	GFLU20131203185600743925000000	GFLU20131203185627775813000000	GFLU20131203185651514669000000	GFLU20131203185720810239000000	GFLU20131203203446527084000000	GFLU20131203203501805928000000	GFLU20131203203513863218000000	GFLU20131203203523234694000000	GFLU20131203222306734642000000	GFLU20131203222329624962000000	GFLU20131203222538613490000000	GFLU20131203222557967287000000	GFLU20131203222632429564000000	GFLU20131203230336948736000000	GFLU20131203230400303531000000	GFLU20131204002446559965000000	GFLU20131230164912246391000000	GFLU20131230164912692795000000	GFLU20131230164913256545000000	GFLU20131230164913550188000000	GFLU20131230164913950023000000	GFLU20131230164914069211000000	GFLU20131230164914496790000000	GFLU20131230164914716475000000	GFLU20131230164914843719000000	GFLU20131230164915163503000000	GFLU20131230164915393862000000	GFLU20131230164915504744000000	GFLU20131230164915596595000000	GFLU20131230164915758526000000	GFLU20131230164915856587000000	GFLU20131230164915907956000000	GFLU20131230164915995141000000	GFLU20131230164916093183000000	GFLU20131230164916157466000000	GFLU20131230211343236208000000	GFLU20131230211343419650000000	GFLU20131230211343605075000000	GFLU20131230211343799585000000	GFLU20131230211343842573000000	GFLU20131230211344214865000000	GFLU20131230211344594219000000	GFLU20131230211344662701000000	GFLU20131230211344773282000000	GFLU20131230211344951543000000	GFLU20131230211345099571000000	GFLU20131230211345294491000000	GFLU20131230211345387488000000	GFLU20131230211345452659000000	GFLU20131231131422920677000000	GFLU20131231131424691326000000	GFLU20131231131425542804000000	GFLU20131231131425768713000000	GFLU20131231131426223746000000	GFLU20131231131426408675000000	GFLU20131231131426784319000000	GFLU20131231131426949311000000	GFLU20131231131427047479000000	GFLU20131231131427101593000000	GFLU20131231131427184540000000	GFLU20131231131427271202000000	GFLU20131231131427333528000000	GFLU20131231201806058732000000	GFLU20140102141846067740000000	GFLU20140102141910559513000000	GFLU20140102141921492524000000	GFLU20140102143317449028000000	GFLU20140103161837200256000000	GFLU20140103161854671615000000	GFLU20140106165354039268000000	GFLU20140106165451906375000000	GFLU20140106175333111396000000	GFLU20140113205903877367000000	GFLU20140113211432897834000000	GFLU20140122194042742595000000	GFLU20140122222400891202000000	GFLU20140122230958687511000000	GFLU20140123000239810061000000	GFLU20140301040458839511000000	GFLU20140301040517604689000000	GFLU20140301040543504795000000	GFLU20140301040553499723000000	GFLU20140301040603658419000000	GFLU20140301040614242393000000	GFLU20140303202922525103000000	GFLU20140303202934971134000000	GFLU20140303202946237645000000	GFLU20140303202955114565000000	GFLU20140303203004724905000000	GFLU20140303203013745168000000	GFLU20140303203108392237000000	GFLU20140303203125789190000000	GFLU20140303203135614718000000	GFLU20140303203145112062000000	GFLU20140303203156867992000000	GFLU20140303203206372635000000	GFLU20140611153833516360000000	20131203183632269670000000	20131203183632301273000000	20131203183632391970000000	20131203183632362131000000	20131203183632269670000000	20131203183632301273000000	20131203183632331029000000	20131203183632362131000000	20140110163905850170000000",",");
this.mls_provider="rets24";
variables.resourceStruct=structnew();
variables.resourceStruct["property"]=structnew();
variables.resourceStruct["property"].resource="property";
variables.resourceStruct["property"].id="list_105";
this.emptyStruct=structnew();
variables.resourceStruct["office"]=structnew();
variables.resourceStruct["office"].resource="office";
variables.resourceStruct["office"].id="office_0";
variables.resourceStruct["agent"]=structnew();
variables.resourceStruct["agent"].resource="activeagent";
variables.resourceStruct["agent"].id="member_0";

variables.tableLookup=structnew();
variables.tableLookup["A"]="A";
variables.tableLookup["B"]="B";
variables.tableLookup["C"]="C";
variables.tableLookup["E"]="E";  
variables.tableLookup["F"]="F";
variables.tableLookup["G"]="G";
variables.tableLookup["H"]="H";
variables.tableLookup["I"]="I";

</cfscript>

<cffunction name="deleteListings" localmode="modern" output="no" returntype="any">
	<cfargument name="idlist" type="string" required="yes">
	<cfscript>
	var db=request.zos.queryObject;
	var arrId=listtoarray(mid(replace(arguments.idlist," ","","ALL"),2,len(arguments.idlist)-2),"','");
	super.deleteListings(arguments.idlist);
	
	db.sql="DELETE FROM #db.table("rets24_property", request.zos.zcoreDatasource)#  
	WHERE rets24_list_105 IN (#db.trustedSQL(arguments.idlist)#)";
	db.execute("q"); 
	</cfscript>
</cffunction>

<cffunction name="initImport" localmode="modern" output="no" returntype="any">
	<cfargument name="resource" type="string" required="yes">
	<cfargument name="sharedStruct" type="struct" required="yes">
	<cfscript>
	var db=request.zos.queryObject;
	var local=structnew();
	var qZ=0;
	super.initImport(arguments.resource, arguments.sharedStruct);
	
	arguments.sharedStruct.lookupStruct.cityRenameStruct=structnew();
	</cfscript>
</cffunction>

<cffunction name="parseRawData" localmode="modern" output="yes" returntype="any">
	<cfargument name="ss" type="struct" required="yes">
	<cfscript>
	var rs5=0;
	var r222=0;
	var values="";
	var newlist="";
	var i=0;
	var columnIndex=structnew();
	var cityname=0;
	var cid=0;
	var a9=arraynew(1);
	var ts=0;
	var col=0;
	var tmp=0;
	var uns=0;
	var arrt3=0;
	var address=0;
	var arrt2=0;
	var datacom=0;
	var ad=0;
	var liststatus=0;
	var s2=0;
	var curlat=0;
	var curlong=0;
	var ts2=0;
	var s=0;
	var arrT=0;
	var rs=0;
	
	if(structcount(this.emptyStruct) EQ 0){
		for(i=1;i LTE arraylen(this.arrColumns);i++){
			this.emptyStruct[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.metaStruct["property"].tableFields[this.arrColumns[i]].longname]="";
		}
	}
	
	for(i=1;i LTE arraylen(arguments.ss.arrData);i++){
		if(structkeyexists(request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.idxSkipDataIndexStruct, i) EQ false){
			arrayappend(a9, arguments.ss.arrData[i]);	
		}
	}
	arguments.ss.arrData=a9;
	ts=duplicate(this.emptyStruct);
	if(arraylen(arguments.ss.arrData) NEQ arraylen(request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.arrColumns)){
		application.zcore.functions.zdump(request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.arrColumns);
		application.zcore.functions.zdump(arguments.ss.arrData);
		application.zcore.functions.zabort();
	}  
	if(arraylen(arguments.ss.arrData) LT arraylen(request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.arrColumns)){
		application.zcore.template.fail("RETS#this.mls_id#: This row was not long enough to contain all columns: "&application.zcore.functions.zparagraphformat(arraytolist(arguments.ss.arrData,chr(10)))&""); 
	}
	for(i=1;i LTE arraylen(request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.arrColumns);i++){
		col=(request.zos.listing.mlsStruct[this.mls_id].sharedStruct.metaStruct["property"].tableFields[removechars(request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.arrColumns[i],1,7)].longname);
		ts["rets24_"&removechars(request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.arrColumns[i],1,7)]=arguments.ss.arrData[i];
		if(arguments.ss.arrData[i] EQ '0'){
			arguments.ss.arrData[i]="";	
		}
		if(structkeyexists(ts,col)){
			if(ts[col] NEQ ""){
				ts[col]=ts[col]&","&application.zcore.functions.zescape(arguments.ss.arrData[i]);
			}else{
				ts[col]=application.zcore.functions.zescape(arguments.ss.arrData[i]);
			}
		}else{ 
			ts[col]=application.zcore.functions.zescape(arguments.ss.arrData[i]);
		}
		//ts[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.arrColumns[i]]=ts[col];
		columnIndex[col]=i;
	}
	if(not structkeyexists(ts, "list price")){
		ts["list price"]=replace(ts["original list price"],",","","ALL");
	}else{
		ts["list price"]=replace(ts["list price"],",","","ALL");
	}
	// need to clean this data - remove not in subdivision, 0 , etc.
	
	local.listing_subdivision=this.getRetsValue("property", ts["rets24_list_8"], "LIST_77",ts['Project Name/Subdivision']);
	if(local.listing_subdivision NEQ ""){
		if(findnocase(","&local.listing_subdivision&",", ",,false,none,not on the list,not in subdivision,n/a,other,zzz,na,0,.,N,0000,00,/,") NEQ 0){
			local.listing_subdivision="";
		}else{
			local.listing_subdivision=application.zcore.functions.zFirstLetterCaps(local.listing_subdivision);
		}
	} 
	ts['zip code']=this.getRetsValue("property", ts["rets24_list_8"], "LIST_43",ts['zip code']); 
	
	this.price=ts["list price"];
	local.listing_price=ts["list price"];
	cityName="";
	cid=0;
	ts['city']=this.getRetsValue("property", ts["rets24_list_8"], "LIST_39", ts['city']);
	ts['state']=this.getRetsValue("property", ts["rets24_list_8"], "LIST_40",ts['state']);
	if(structkeyexists(request.zos.listing.cityStruct, ts["city"]&"|"&ts["State"])){
		cid=request.zos.listing.cityStruct[ts["city"]&"|"&ts["State"]];
	}
	if(cid EQ 0 and structkeyexists(request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.cityRenameStruct, ts['zip code'])){
		cityName=request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.cityRenameStruct[ts['zip code']];
		ts["city"]=listgetat(cityName,1,"|");
		if(structkeyexists(request.zos.listing.cityStruct, cityName&"|"&ts["State"])){
			cid=request.zos.listing.cityStruct[cityName&"|"&ts["State"]];
		}
	}
	local.listing_county=this.listingLookupNewId("county",ts['county']);
	
	local.listing_parking=this.listingLookupNewId("parking",ts['Parking Features']);

	local.listing_sub_type_id=this.listingLookupNewId("listing_sub_type",ts['rets24_list_9']);
	
	local.listing_type_id=this.listingLookupNewId("listing_type",ts['rets24_list_8']);

	ad=ts['street ##'];
	if(ad NEQ 0){
		address="#ad# ";
	}else{
		address="";	
	}
	ts['street suffix']=this.getRetsValue("property", ts["rets24_list_8"], "LIST_37",ts['street suffix']);
	ts['street direction']=this.getRetsValue("property", ts["rets24_list_8"], "LIST_33",ts['street direction']);
	address&=application.zcore.functions.zfirstlettercaps(ts['Street direction']&" "&ts['street name']&" "&ts['street suffix']);
	curLat=ts["rets24_list_46"];
	curLong=ts["rets24_list_47"];
	if(curLat EQ "" and trim(address) NEQ ""){
		rs5=this.baseGetLatLong(address,ts['State'],ts['zip code'], arguments.ss.listing_id);
		curLat=rs5.latitude;
		curLong=rs5.longitude;
	}
	
	if(ts['Unit ##'] NEQ ''){
		address&=" Unit: "&ts["Unit ##"];
	}
	
	
	
	
	s2=structnew();
	liststatus=this.getRetsValue("property", ts["rets24_list_8"], 'list_15', ts["status"]);
	if(liststatus EQ "Active"){
		s2[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.liststatusStr["active"]]=true;
	}else if(liststatus EQ "Cancelled"){
		s2[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.liststatusStr["Cancelled"]]=true;
	}else if(liststatus EQ "Pending"){
		s2[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.liststatusStr["pending"]]=true;
	}else if(liststatus EQ "Expired"){
		s2[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.liststatusStr["expired"]]=true;
	}else if(liststatus EQ "Sold"){
		s2[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.liststatusStr["sold"]]=true;
	}else if(liststatus EQ "Leased"){
		s2[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.liststatusStr["leased"]]=true;
	}else if(liststatus EQ "Contingent"){
		s2[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.liststatusStr["contingent"]]=true;
	}else if(liststatus EQ "Deleted"){
		s2[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.liststatusStr["deleted"]]=true;
	}else if(liststatus EQ "Temp Off Market"){
		s2[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.liststatusStr["temporarily withdrawn"]]=true;
	}
	local.listing_liststatus=structkeylist(s2,",");
	
	arrT3=[];
	uns=structnew();
	tmp=ts['Design'];
	// style and pool don't work.
	if(tmp NEQ ""){
	   arrT=listtoarray(tmp);
		for(i=1;i LTE arraylen(arrT);i++){
			tmp=this.listingLookupNewId("style",arrT[i]);
			if(tmp NEQ "" and structkeyexists(uns,tmp) EQ false){
				uns[tmp]=true;
				arrayappend(arrT3,tmp);
			}
		}
	}
	local.listing_style=arraytolist(arrT3);
	
	// view & frontage
	arrT3=[];
	
	uns=structnew();
	tmp=ts['Waterfront'];
	if(tmp NEQ ""){
	   arrT=listtoarray(tmp);
		for(i=1;i LTE arraylen(arrT);i++){
			tmp=this.listingLookupNewId("frontage",arrT[i]);
			if(tmp NEQ "" and structkeyexists(uns,tmp) EQ false){
				uns[tmp]=true;
				arrayappend(arrT3,tmp);
			}
		}
	}
	local.listing_frontage=arraytolist(arrT3); 
	
	arrT2=[]; 
	uns=structnew();
	tmp=ts['Waterview'];
	if(tmp NEQ ""){
	   arrT=listtoarray(tmp);
		for(i=1;i LTE arraylen(arrT);i++){
			tmp=this.listingLookupNewId("view",arrT[i]);
			if(tmp NEQ "" and structkeyexists(uns,tmp) EQ false){
				uns[tmp]=true;
				arrayappend(arrT2,tmp);
			}
		}
	}
	local.listing_view=arraytolist(arrT2);
	

	pt={
		"B":{
			key:"rets24_GF20131230164914069211000000",
			data:{
				"15D2MANQULJ3":true, 
				"15D2MANQUQAT":true, 
				"15D2MANQUU6H":true, 
				"15D2MANQV1O8":true, 
				"15D2MANQV53V":true, 
				"15D2MANQV8E7":true, 
				"15D2MANQVAXP":true, 
				"15D2MANQVDVY":true
			}
		}, 
		"A":{
            key:"rets24_GF20131203203501805928000000",
            data:{
                  "15CT2CSTIK65":true, 
                  "15CT2CTBHUM9":true, 
                  "15CT2CV42SDI":true, 
                  "15CT2CWI8E8G":true, 
                  "15CT2CX1TDMJ":true, 
                  "15CT2CY447UI":true, 
                  "15CT2CYDMLF4":true, 
                  "15CT2CZETA9V":true
            }
        },
        "G":{
        	key:"rets24_GF20131230211343842573000000",
        	data:{
        		"15D2MVZLUEMS":true, 
				"15D2MVZLUHVG":true, 
				"15D2MVZLUKV4":true, 
				"15D2MVZLUO3X":true, 
				"15D2MVZLURDO":true, 
				"15D2MVZLUUBU":true, 
				"15D2MVZLUXV3":true, 
				"15D2MVZLV132":true
        	}
        }
	};
	local.listing_pool=0;
	for(i in pt){
		if(i EQ ts.rets24_list_8){
			if(structkeyexists(ts, pt[i].key)){
				arrPool=listtoarray(ts[pt[i].key], ",");
				for(n=1;n LTE arraylen(arrPool);n++){
					if(structkeyexists(pt[i].data, arrPool[n])){
						local.listing_pool=1;
						break;
					}
				}
			}
		}
	}
 
	ts=this.convertRawDataToLookupValues(ts, ts["rets24_list_8"], ts["rets24_list_8"]);

	ts2=structnew();
	ts2.field="";
	ts2.yearbuiltfield=ts['year built'];
	ts2.foreclosureField="";
	
	s=this.processRawStatus(ts2);
	
	if(ts["rets24_list_8"] EQ "G" or ts["rets24_list_8"] EQ "F"){
		s[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.statusStr["for rent"]]=true;
	}else{
		s[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.statusStr["for sale"]]=true;
	} 
	if(ts["rets24_list_8"] EQ "H"){
		s[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.statusStr["auction"]]=true;
	}
	if(structkeyexists(ts, 'Sale Type')){
		if(ts['Sale Type'] CONTAINS 'auction'){
			s[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.statusStr["auction"]]=true;
		}
		if(ts['Sale Type'] CONTAINS 'foreclosure'){
			s[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.statusStr["foreclosure"]]=true;
		}
		if(ts['Sale Type'] CONTAINS 'reo'){
			s[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.statusStr["bank owned"]]=true;
		}
		if(ts['Sale Type'] CONTAINS 'short sale'){
			s[request.zos.listing.mlsStruct[this.mls_id].sharedStruct.lookupStruct.statusStr["short sale"]]=true;
		}   
	}
	local.listing_status=structkeylist(s,",");
	
	local.arrRoom=listToArray('room_b2_room,room_b3_room,room_b4_room,room_b5_room,room_b6_room,room_b7_room,room_bkr_room,room_bnr_room,room_cr_room,room_dr_room,room_drr_room,room_en_room,room_er_room,room_fr_room,room_gh_room,room_gr_room,room_il_room,room_kt_room,room_lb_room,room_lnr_room,room_lr_room,room_mb_room,room_mbt_room,room_md_room,room_mr_room,room_ms_room,room_of_room,room_ot_room,room_pl_room,room_pr_room,room_rr_room,room_sl_room,room_sr_room,room_st_room,room_stu_room,room_ut_room', ',');
	for(i=1;i LTE arraylen(local.arrRoom);i++){
		if(structkeyexists(ts, "rets24_"&local.arrRoom[i]&"_length") and ts["rets24_"&local.arrRoom[i]&"_length"] NEQ ""){
			ts["rets24_"&local.arrRoom[i]&"_length"]=ts["rets24_"&local.arrRoom[i]&"_width"]&"x"&ts["rets24_"&local.arrRoom[i]&"_length"];
		}
	}
	dataCom=this.getRetsDataObject();
	local.listing_data_detailcache1=dataCom.getDetailCache1(ts);
	local.listing_data_detailcache2=dataCom.getDetailCache2(ts);
	local.listing_data_detailcache3=dataCom.getDetailCache3(ts);
	
	rs=structnew();
	rs.listing_id=arguments.ss.listing_id;
	rs.listing_acreage=ts["Acreage"];
	if(structkeyexists(ts, "Full Baths")){
		rs.listing_baths=ts["Full Baths"];
	}else if(structkeyexists(ts, 'Baths - Full')){
		rs.listing_baths=ts["Baths - Full"];
	}else{
		rs.listing_baths='';
	}
	rs.listing_halfbaths=ts["Half Baths"];
	rs.listing_beds=ts["Bedrooms"];
	rs.listing_city=cid;
	rs.listing_county=local.listing_county;
	rs.listing_frontage=","&local.listing_frontage&",";
	rs.listing_frontage_name="";
	rs.listing_price=ts["list price"];
	rs.listing_status=","&local.listing_status&",";
	rs.listing_state=ts["State"];
	rs.listing_type_id=local.listing_type_id;
	rs.listing_sub_type_id=","&local.listing_sub_type_id&",";
	rs.listing_style=","&local.listing_style&",";
	rs.listing_view=","&local.listing_view&",";
	rs.listing_lot_square_feet=application.zcore.functions.zso(ts, "rets24_list_51");
	rs.listing_square_feet=application.zcore.functions.zso(ts, "rets24_list_48"); 
	rs.listing_subdivision=local.listing_subdivision;
	rs.listing_year_built=ts["year built"];
	rs.listing_office=ts["Office ID"];
	rs.listing_agent=ts["Agent ID"];
	rs.listing_latitude=curLat;
	rs.listing_longitude=curLong;
	rs.listing_pool=local.listing_pool;
	rs.listing_photocount=ts["Picture Count"];
	rs.listing_coded_features="";
	rs.listing_updated_datetime=arguments.ss.listing_track_updated_datetime;
	rs.listing_primary="0";
	rs.listing_mls_id=arguments.ss.listing_mls_id;
	rs.listing_address=trim(address);
	rs.listing_zip=ts["zip code"];
	rs.listing_condition="";
	rs.listing_parking=local.listing_parking;
	rs.listing_region="";
	rs.listing_tenure="";
	rs.listing_liststatus=local.listing_liststatus;
	rs.listing_data_remarks=ts["Remarks"];
	rs.listing_data_address=trim(address);
	rs.listing_data_zip=trim(ts["zip code"]);
	rs.listing_data_detailcache1=local.listing_data_detailcache1;
	rs.listing_data_detailcache2=local.listing_data_detailcache2;
	rs.listing_data_detailcache3=local.listing_data_detailcache3; 

	return {
		listingData:rs,
		columnIndex:columnIndex,
		arrData:arguments.ss.arrData
	};
	</cfscript>
</cffunction>
    
<cffunction name="getJoinSQL" localmode="modern" output="yes" returntype="any">
	<cfscript>
	var db=request.zos.queryObject;
	return "INNER JOIN #db.table("rets24_property", request.zos.zcoreDatasource)# rets24_property ON rets24_property.rets24_list_105 = listing.listing_id";
	</cfscript>
</cffunction>
    <cffunction name="getPropertyListingIdSQL" localmode="modern" output="yes" returntype="any">
    	<cfreturn "rets24_property.rets24_list_105">
    </cffunction>
    
<cffunction name="getDetails" localmode="modern" output="yes" returntype="any">
	<cfargument name="query" type="query" required="yes">
	<cfargument name="row" type="numeric" required="no" default="#1#">
	<cfargument name="fulldetails" type="boolean" required="no" default="#false#">
	<cfscript>
	var db=request.zos.queryObject;
	var q1=0;
	var t44444=0;
	var t99=0;
	var qOffice=0;
	var details=0;
	var i=0;
	var t1=0;
	var t3=0;
	var t2=0;
	var i10=0;
	var value=0;
	var n=0;
	var column=0;
	var arrV=0;
	var arrV2=0;
	var idx=this.baseGetDetails(arguments.query, arguments.row, arguments.fulldetails);
	t99=gettickcount();
	idx["features"]="";
	idx.listingSource=request.zos.listing.mlsStruct[listgetat(idx.listing_id,1,'-')].mls_disclaimer_name;
	
	t44444=0;
	request.lastPhotoId=idx.listing_id;
	if(idx.listing_photocount EQ 0){
		idx["photo1"]='/z/a/listing/images/image-not-available.gif';
	}else{
		i=1;
		for(i=1;i LTE idx.listing_photocount;i++){
			local.fNameTemp1="24-"&idx.urlMlsPid&"-"&i&".jpeg";
			local.fNameTempMd51=lcase(hash(local.fNameTemp1, 'MD5'));
			idx["photo"&i]=request.zos.retsPhotoPath&'24/'&left(local.fNameTempMd51,2)&"/"&mid(local.fNameTempMd51,3,1)&"/"&local.fNameTemp1;
		}
	} 
	db.sql="select * from #db.table("rets24_office", request.zos.zcoreDatasource)# rets24_office 
	where rets24_office_0=#db.param(idx.listing_office)#";
	qOffice=db.execute("qOffice");  
	idx["agentName"]="";
	idx["agentPhone"]="";
	idx["agentEmail"]="";
	idx["officeName"]="";
	if(qOffice.recordcount NEQ 0){
		idx["officeName"]=qOffice.rets24_office_2;
	}
	idx["officePhone"]="";
	idx["officeCity"]="";
	idx["officeAddress"]="";
	idx["officeZip"]="";
	idx["officeState"]="";
	idx["officeEmail"]="";
		
	idx["virtualtoururl"]=arguments.query["rets24_unbrandedidxvirtualtour"];
	idx["zipcode"]=arguments.query["listing_zip"][arguments.row];
	idx["maintfees"]="";
	if(isnumeric(arguments.query["rets#this.mls_id#_LIST_150"][arguments.row])){
		idx["maintfees"]=arguments.query["rets#this.mls_id#_LIST_150"][arguments.row];
	}else if(isnumeric(arguments.query["rets#this.mls_id#_LIST_50"][arguments.row])){
		idx["maintfees"]=arguments.query["rets#this.mls_id#_LIST_50"][arguments.row];
	}
	
	</cfscript>
	<cfsavecontent variable="details"><table class="ztablepropertyinfo">
	#idx.listing_data_detailcache1#
	#idx.listing_data_detailcache2#
	#idx.listing_data_detailcache3#
	</table></cfsavecontent>
	<cfscript>
	idx.details=details;
	return idx;
	</cfscript>
</cffunction>
    
<cffunction name="getPhoto" localmode="modern" output="no" returntype="any">
	<cfargument name="mls_pid" type="string" required="yes">
	<cfargument name="num" type="numeric" required="no" default="#1#">
	<cfscript>
	request.lastPhotoId=this.mls_id&"-"&arguments.mls_pid;
	local.fNameTemp1="24-"&arguments.mls_pid&"-"&arguments.num&".jpeg";
	local.fNameTempMd51=lcase(hash(local.fNameTemp1, 'MD5'));
	return request.zos.retsPhotoPath&'24/'&left(local.fNameTempMd51,2)&"/"&mid(local.fNameTempMd51,3,1)&"/"&local.fNameTemp1;
	
	</cfscript>
</cffunction>
	
<cffunction name="getLookupTables" localmode="modern" access="public" output="no" returntype="struct">
	<cfscript>
	var i=0;
	var s=0;
	var arrSQL=[];
	var fd=0;
	var arrError=[];
	var i2=0;
	var tmp=0;
	var g=0;
	var db=request.zos.queryObject;
	var qD2=0;
	var arrC=0;
	var tempState=0;
	var failStr=0;
	var qD=0;
	var qZ=0;
	var cityCreated=false;
	//writedump(structkeyarray(application.zcore.listingStruct.mlsStruct["24"].sharedStruct.metaStruct["property"].typeStruct));
	//abort;
	//writedump(application.zcore.listingStruct.mlsStruct["24"].sharedStruct.metaStruct["property"].typeStruct);
	fd=structnew();
	fd["A"]="Residential";
	fd["B"]="Multi-Family";
	fd["C"]="Vacant Land";
	fd["E"]="Commercial for Sale";
	fd["F"]="Commercial for Lease";
	fd["G"]="Rental";
	fd["H"]="Auction";
	fd["I"]="Boat Slips/Docks";
	for(i in fd){
		i2=i;
		if(i2 NEQ ""){
			arrayappend(arrSQL,"('#this.mls_provider#','listing_type','#fd[i]#','#i2#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		}
	}
	for(g=1;g LTE arraylen(this.arrTypeLoop);g++){
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"list_41");
		for(i in fd){
			i2=i;
			arrayappend(arrSQL,"('#this.mls_provider#','county','#fd[i]#','#i2#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		} 
	
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"LIST_9"); 
		for(i in fd){
			i2=i;
			if(i2 NEQ ""){
				arrayappend(arrSQL,"('#this.mls_provider#','listing_sub_type','#fd[i]#','#i2#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
			}
		}
		
		
		// style
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"LIST_54");
		for(i in fd){
			i2=i;
			if(i2 NEQ ""){
				arrayappend(arrSQL,"('#this.mls_provider#','style','#fd[i]#','#i2#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
			}
		}

		// parking
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20140122230958687511000000");
		for(i in fd){
			i2=i;
			if(i2 NEQ ""){
				arrayappend(arrSQL,"('#this.mls_provider#','parking','#fd[i]#','#i2#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
			}
		}
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20131230164915504744000000");
		for(i in fd){
			i2=i;
			if(i2 NEQ ""){
				arrayappend(arrSQL,"('#this.mls_provider#','parking','#fd[i]#','#i2#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
			}
		}
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20140122230958687511000000");
		for(i in fd){
			i2=i;
			if(i2 NEQ ""){
				arrayappend(arrSQL,"('#this.mls_provider#','parking','#fd[i]#','#i2#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
			}
		}
		
		
		
		// frontage
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20131203222329624962000000");
		for(i in fd){
			tmp=i;
			arrayappend(arrSQL,"('#this.mls_provider#','frontage','#fd[i]#','#tmp#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		}
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20131230164915995141000000");
		for(i in fd){
			tmp=i;
			arrayappend(arrSQL,"('#this.mls_provider#','frontage','#fd[i]#','#tmp#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		}
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20131231131427184540000000");
		for(i in fd){
			tmp=i;
			arrayappend(arrSQL,"('#this.mls_provider#','frontage','#fd[i]#','#tmp#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		}
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20140103161837200256000000");
		for(i in fd){
			tmp=i;
			arrayappend(arrSQL,"('#this.mls_provider#','frontage','#fd[i]#','#tmp#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		}
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GFLU20140106175333111396000000");
		for(i in fd){
			tmp=i;
			arrayappend(arrSQL,"('#this.mls_provider#','frontage','#fd[i]#','#tmp#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		}
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20131230211345294491000000");
		for(i in fd){
			tmp=i;
			arrayappend(arrSQL,"('#this.mls_provider#','frontage','#fd[i]#','#tmp#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		}
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20140106165354039268000000");
		for(i in fd){
			tmp=i;
			arrayappend(arrSQL,"('#this.mls_provider#','frontage','#fd[i]#','#tmp#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		}
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20140106165451906375000000");
		for(i in fd){
			tmp=i;
			arrayappend(arrSQL,"('#this.mls_provider#','frontage','#fd[i]#','#tmp#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		}
		
		
		// view
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20131203222538613490000000");
		for(i in fd){
			tmp=i;
			arrayappend(arrSQL,"('#this.mls_provider#','view','#fd[i]#','#tmp#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		}
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20131230164916093183000000");
		for(i in fd){
			tmp=i;
			arrayappend(arrSQL,"('#this.mls_provider#','view','#fd[i]#','#tmp#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		}
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20131231131427271202000000");
		for(i in fd){
			tmp=i;
			arrayappend(arrSQL,"('#this.mls_provider#','view','#fd[i]#','#tmp#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		}
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20131230211345387488000000");
		for(i in fd){
			tmp=i;
			arrayappend(arrSQL,"('#this.mls_provider#','view','#fd[i]#','#tmp#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		}
		fd=this.getRETSValues("property", this.arrTypeLoop[g],"GF20140122222400891202000000");
		for(i in fd){
			tmp=i;
			arrayappend(arrSQL,"('#this.mls_provider#','view','#fd[i]#','#tmp#','#request.zos.mysqlnow#','#i#','#request.zos.mysqlnow#')");
		}

		fd=this.getRETSValues("property", this.arrTypeLoop[g],"list_39"); 
		arrC=arraynew(1);
		failStr="";
		for(i in fd){
			tempState="FL"; 
			if(fd[i] NEQ "SEE REMARKS" and fd[i] NEQ "NOT AVAILABLE" and fd[i] NEQ "NONE"){
				 db.sql="select * from #db.table("city_rename", request.zos.zcoreDatasource)# city_rename 
				WHERE city_name =#db.param(fd[i])# and state_abbr=#db.param(tempState)#";
				qD2=db.execute("qD2");
				if(qD2.recordcount NEQ 0){
					fd[i]=qD2.city_renamed;
				}
				 db.sql="select * from #db.table("city", request.zos.zcoreDatasource)# city 
				WHERE city_name =#db.param(fd[i])# and 
				state_abbr=#db.param(tempState)#";
				qD=db.execute("qD");
				if(qD.recordcount EQ 0){
					 db.sql="INSERT INTO #db.table("city", request.zos.zcoreDatasource)#  
					 SET city_name=#db.param(application.zcore.functions.zfirstlettercaps(fd[i]))#, 
					 state_abbr=#db.param(tempState)#,
					 country_code=#db.param('US')#, 
					 city_mls_id=#db.param(i)#,
					 city_updated_datetime=#db.param(request.zos.mysqlnow)# ";
					 local.result=db.insert("q"); 
					 db.sql="INSERT INTO #db.table("#request.zos.ramtableprefix#city", request.zos.zcoreDatasource)#  
					 SET city_id=#db.param(local.result.result)#, 
					 city_name=#db.param(application.zcore.functions.zfirstlettercaps(fd[i]))#, 
					 state_abbr=#db.param(tempState)#,
					 country_code=#db.param('US')#, 
					 city_mls_id=#db.param(i)# ,
					 city_updated_datetime=#db.param(request.zos.mysqlnow)#";
					 db.execute("q");
					cityCreated=true; // need to run zipcode calculations
				}
			}
			
			arrayClear(request.zos.arrQueryLog);
		}
	}
	return {arrSQL:arrSQL, cityCreated:cityCreated, arrError:arrError};
	</cfscript>
</cffunction>
</cfoutput>
</cfcomponent>